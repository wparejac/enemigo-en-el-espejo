<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>El Enemigo en el Espejo - Presentación</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600&family=Playfair+Display:ital,wght@0,400;0,700;1,400&display=swap" rel="stylesheet">
    <style>
        :root {
            --transition-speed: 0.8s;
        }
        body {
            font-family: 'Inter', sans-serif;
            background-color: #000;
            color: #fff;
            margin: 0;
            overflow: hidden;
            height: 100vh;
        }
        .font-serif { font-family: 'Playfair Display', serif; }

        /* Sistema de Transiciones Limpias */
        .slides-wrapper {
            position: relative;
            width: 100%;
            height: 100%;
        }
        .slide {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            opacity: 0;
            visibility: hidden;
            transition: opacity var(--transition-speed) ease, transform var(--transition-speed) ease;
            transform: scale(1.05);
            z-index: 1;
        }
        .slide.active {
            opacity: 1;
            visibility: visible;
            transform: scale(1);
            z-index: 10;
        }

        /* Ajuste de Imagen de Portada */
        .cover-image-container {
            width: 100%;
            max-width: 500px;
            height: auto;
            max-height: 60vh;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        .cover-image-container img {
            width: 100%;
            height: 100%;
            object-fit: contain; /* Asegura que la imagen se vea completa */
            border-radius: 1.5rem;
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.5);
        }

        /* Scrollbar interna para textos largos */
        .content-scroll {
            max-height: 70vh;
            overflow-y: auto;
            padding-right: 1rem;
            width: 100%;
            max-width: 800px;
            scrollbar-width: thin;
            scrollbar-color: rgba(255,255,255,0.2) transparent;
        }
        .content-scroll::-webkit-scrollbar { width: 4px; }
        .content-scroll::-webkit-scrollbar-thumb { background: rgba(255,255,255,0.2); border-radius: 10px; }

        /* Acordeones */
        .reflection-body {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.4s ease-out;
            background: rgba(255,255,255,0.03);
        }
        .reflection-item.open .reflection-body {
            max-height: 200px;
        }

        .bg-overlay {
            position: fixed;
            inset: 0;
            transition: background-color 1.5s ease;
            z-index: 0;
        }
    </style>
</head>
<body class="bg-transition">

    <div id="bg-layer" class="bg-overlay" style="background-color: #000;"></div>

    <!-- Indicador Superior -->
    <div class="fixed top-8 left-0 w-full flex justify-center gap-2 z-50">
        <div id="dots-container" class="flex gap-2"></div>
    </div>

    <!-- Contenedor de Slides -->
    <div class="slides-wrapper" id="slides-master">
        <!-- Los slides se inyectan vía JS -->
    </div>

    <!-- Controles -->
    <footer class="fixed bottom-0 left-0 w-full p-6 md:p-10 flex justify-between items-center z-50 bg-gradient-to-t from-black via-transparent to-transparent">
        <button id="btn-prev" class="px-4 py-2 text-xs font-bold tracking-widest uppercase text-white/30 hover:text-white transition-opacity opacity-0">
            ← Atrás
        </button>
        <button id="btn-next" class="px-8 py-3 rounded-full bg-white text-black font-bold text-xs tracking-widest uppercase transition-all hover:scale-105 active:scale-95 shadow-xl">
            Siguiente
        </button>
    </footer>

    <script>
        const data = [
            {
                title: "EL ENEMIGO EN EL ESPEJO",
                subtitle: "La Sinfonía de los Romanos",
                image: "https://i.imgur.com/ncZnQAB.jpeg",
                desc: "Cuando el éxito suena fuerte, pero el corazón está desafinado.",
                long: "No es religión, es el arte de la armonía perfecta.",
                bg: "#000000",
                type: "cover"
            },
            {
                title: "El Piano de la Gran Sala",
                subtitle: "Fase 1: El Ruido de la Uniformidad",
                desc: "Un piano que olvidó que la música nace de la integración.",
                long: `Cuentan que un piano de cola presumía de su sonido perfecto. Las Teclas Blancas decidieron que ellas eran las dueñas de la música y que las Negras solo estorbaban.\n\nAl callar las negras, la música sonó plana, vacía y sin alma. El maestro susurró: "La armonía solo existe cuando las negras aceptan su lugar y las blancas reconocen que sin ellas, la obra está incompleta".`,
                reflections: [
                    { t: "El egoísmo es ruido; la armonía es música", d: "El ruido es la insistencia del 'yo' por sobresalir a toda costa." },
                    { t: "La trampa del protagonismo absoluto", d: "Creer que somos los únicos dueños de la verdad nos aísla." },
                    { t: "La sincronía requiere humildad", d: "La humildad es la llave de la sinfonía de la vida." }
                ],
                bg: "#0c0a09"
            },
            {
                title: "El Arquitecto del Destino",
                subtitle: "Pablo: De perseguidor a Estratega",
                desc: "Pablo transformó una carta en una ingeniería espiritual.",
                long: "Entendía que para conquistar Roma no necesitaba legiones, sino una idea cuya hora había llegado.",
                biblical: "Romanos 1:1 - Pablo, siervo de Jesucristo...",
                bg: "#020617"
            },
            {
                title: "El Grito del Profeta",
                subtitle: "Habacuc: El Fundamento",
                desc: "Habacuc miró su sociedad y solo vio injusticia.",
                long: "Su grito fue la semilla de Pablo. Dios respondió: 'Haré una obra que no creerías'. Esa obra es la Fe.",
                biblical: "Habacuc 2:4 - El justo por su fe vivirá.",
                bg: "#1c1917"
            },
            {
                title: "La Metrópolis Imperial",
                subtitle: "Roma: El New York del Siglo I",
                desc: "Creyentes famosos pero hambrientos de espíritu.",
                long: "Pablo les escribe como a expertos que olvidaron sintonizar su corazón con el Director.",
                biblical: "Romanos 1:8 - Vuestra fe se divulga por todo el mundo.",
                bg: "#1c1917"
            },
            {
                title: "¿Qué es el Orgullo?",
                subtitle: "Diagnóstico: El Alma Inflada",
                desc: "No es exceso de poder, es un vacío lleno de aire.",
                long: "Ocupar con el ego el espacio de Dios. Es el 'solo' que ignora al director.",
                biblical: "Romanos 1:21 - Se envanecieron en sus razonamientos.",
                bg: "#450a0a"
            },
            {
                title: "¿Qué es la Armonía?",
                subtitle: "Dikeaosune: El Arte de la Justicia",
                desc: "Seguir la misma partitura bajo la batuta del Espíritu.",
                long: "Estar en el lugar exacto. Dejar de ser ruido de supervivencia para ser nota de redención.",
                biblical: "Romanos 1:17 - La justicia de Dios se descubre por fe.",
                bg: "#1e1b4b"
            },
            {
                title: "Poder Real vs Falso",
                subtitle: "Dynamis: Poder para Salvación",
                desc: "El Evangelio es el poder explosivo que nos rescata.",
                long: "Dejar de aparentar para permitir que la resurrección nos limpie el ruido.",
                biblical: "Romanos 1:16 - No me avergüenzo del evangelio.",
                bg: "#172554"
            },
            {
                title: "Cierre de Sinfonía",
                subtitle: "Gracias por tu tiempo",
                desc: "La melodía apenas comienza en tu vida.",
                long: "Que hoy decidas unirte a la gran sinfonía del Rey. ¡Bendiciones!",
                bg: "#0f172a",
                isFinal: true
            }
        ];

        let current = 0;
        const master = document.getElementById('slides-master');
        const dots = document.getElementById('dots-container');
        const bgLayer = document.getElementById('bg-layer');
        const nextBtn = document.getElementById('btn-next');
        const prevBtn = document.getElementById('btn-prev');

        function init() {
            // Crear Puntos
            dots.innerHTML = data.map((_, i) => `<div class="h-1 rounded-full bg-white/20 transition-all duration-500 ${i===0?'w-8 bg-white': 'w-2'}" id="dot-${i}"></div>`).join('');
            
            // Crear Slides
            master.innerHTML = data.map((s, i) => `
                <div class="slide ${i===0?'active':''}" id="slide-${i}">
                    <div class="content-scroll flex flex-col items-center custom-scrollbar px-4">
                        ${s.type === 'cover' ? `
                            <div class="cover-image-container mb-8">
                                <img src="${s.image}" alt="Portada">
                            </div>
                        ` : `
                            <div class="mb-6 p-6 rounded-3xl bg-white/5 border border-white/10 shadow-2xl">
                                <svg class="w-10 h-10" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M9 19V6l12-3v13M9 19c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zm12-3c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zM9 10l12-3"/></svg>
                            </div>
                        `}
                        
                        <span class="text-[10px] uppercase tracking-[0.5em] text-white/50 font-bold mb-4">${s.subtitle}</span>
                        <h2 class="font-serif italic text-4xl md:text-7xl mb-6 text-center leading-tight">${s.title}</h2>
                        <p class="text-lg md:text-2xl text-white/80 font-light mb-6 text-center max-w-2xl">${s.desc}</p>
                        
                        <div class="w-full h-px bg-white/10 mb-6"></div>
                        
                        <div class="text-sm md:text-base text-white/40 leading-relaxed max-w-2xl italic text-center mb-8 whitespace-pre-line">
                            ${s.long}
                        </div>

                        ${s.biblical ? `<div class="p-4 bg-white/5 rounded-2xl border-l-4 border-indigo-500 text-left w-full max-w-xl"><p class="text-xs font-bold text-indigo-400 mb-1 uppercase">Fundamento</p><p class="text-sm text-white/60 italic">"${s.biblical}"</p></div>` : ''}

                        ${s.reflections ? `
                            <div class="w-full max-w-xl space-y-3 mt-4 text-left pb-10">
                                ${s.reflections.map((r, ri) => `
                                    <div class="reflection-item border border-white/5 rounded-xl overflow-hidden" onclick="toggleRef(${i}, ${ri})">
                                        <button class="w-full p-4 flex justify-between items-center text-left hover:bg-white/5">
                                            <span class="text-sm font-bold text-white/70">${r.t}</span>
                                            <span class="text-white/20">↓</span>
                                        </button>
                                        <div class="reflection-body" id="ref-${i}-${ri}">
                                            <p class="p-4 pt-0 text-xs text-white/40 leading-relaxed">${r.d}</p>
                                        </div>
                                    </div>
                                `).join('')}
                            </div>
                        ` : ''}
                        
                        ${s.isFinal ? `<div class="flex gap-4 opacity-30 mt-8"><span class="text-2xl">♥</span><span class="text-2xl">★</span></div>` : ''}
                    </div>
                </div>
            `).join('');
            
            update();
        }

        function update() {
            // Actualizar Fondo
            bgLayer.style.backgroundColor = data[current].bg;
            
            // Actualizar Slides
            data.forEach((_, i) => {
                const el = document.getElementById(`slide-${i}`);
                const dot = document.getElementById(`dot-${i}`);
                if(i === current) {
                    el.classList.add('active');
                    dot.classList.add('w-8', 'bg-white');
                    dot.classList.remove('w-2', 'bg-white/20');
                } else {
                    el.classList.remove('active');
                    dot.classList.remove('w-8', 'bg-white');
                    dot.classList.add('w-2', 'bg-white/20');
                }
            });

            // Botones
            prevBtn.style.opacity = current === 0 ? "0" : "1";
            prevBtn.style.pointerEvents = current === 0 ? "none" : "auto";
            nextBtn.innerText = current === 0 ? "Comenzar" : (current === data.length - 1 ? "Reiniciar" : "Siguiente");
        }

        function toggleRef(slideIdx, refIdx) {
            const el = document.getElementById(`ref-${slideIdx}-${refIdx}`);
            const parent = el.parentElement;
            const isOpen = parent.classList.contains('open');
            
            // Cerrar otros en el mismo slide
            document.querySelectorAll(`#slide-${slideIdx} .reflection-item`).forEach(item => item.classList.remove('open'));
            
            if(!isOpen) parent.classList.add('open');
        }

        nextBtn.onclick = () => {
            current = (current + 1) % data.length;
            update();
        };

        prevBtn.onclick = () => {
            if(current > 0) {
                current--;
                update();
            }
        };

        window.onload = init;
    </script>
</body>
</html>
